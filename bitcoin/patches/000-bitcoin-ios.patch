diff --git a/configure.ac b/configure.ac
index 44ca821..57a27fe 100644
--- a/configure.ac
+++ b/configure.ac
@@ -724,6 +724,10 @@ if test x$TARGET_OS = xdarwin; then
   AX_CHECK_LINK_FLAG([[-Wl,-dead_strip]], [LDFLAGS="$LDFLAGS -Wl,-dead_strip"])
 fi
 
+if test x$TARGET_OS = xdarwin; then
+    AC_CHECK_HEADER(TargetConditionals.h, [AC_DEFINE(HAVE_TARGETCONDITIONALS, 1,[Define this symbol if you have the <TargetConditionals.h> header file])], [AC_MSG_WARN([TargetConditionals.h not found])])
+fi
+
 AC_CHECK_HEADERS([endian.h sys/endian.h byteswap.h stdio.h stdlib.h unistd.h strings.h sys/types.h sys/stat.h sys/select.h sys/prctl.h])
 
 AC_CHECK_DECLS([strnlen])
